<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.up_vams.photoDiscussion.dao.PhotoDiscussionMapper">
  <resultMap id="photoDiscussionMap" type="PhotoDiscussion">
    <id column="discussion_id" property="discussionId" jdbcType="VARCHAR"/>
    <id column="photo_id" property="photoId" jdbcType="VARCHAR"/>
  </resultMap>


  <insert id="insert" parameterType="PhotoDiscussion">
    insert into t_r_photo_discussion (discussion_id, photo_id)
    values (#{discussionId,jdbcType=VARCHAR}, #{photoId,jdbcType=VARCHAR})
  </insert>

  <select id="selectPageList" parameterType="Page" resultMap="photoDiscussionMap">

    SELECT pd.discussion_id, pd.photo_id
FROM t_r_photo_discussion pd  inner JOIN t_discussion d
WHERE pd.discussion_id=d.discussion_id AND pd.photo_id=#{id} order by d.floor_num  limit #{start},#{pageSize}

  </select>
</mapper>